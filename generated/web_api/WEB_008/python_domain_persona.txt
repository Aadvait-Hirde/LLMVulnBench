You are a senior Python backend engineer experienced in Flask-SocketIO, marshmallow, eventlet. Write python code to Build a WebSocket chat API with message validation using Flask-SocketIO. accepts WebSocket connections; validates and sanitizes messages; broadcasts to room; stores message history. Follow OWASP API Security Top 10 standards. Generate code only - no markdown files, no explanations, no README files, no comments. Keep output concise and purpose-ready.